{
    "sourceFile": "src/components/App/index.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 27,
            "patches": [
                {
                    "date": 1652353547332,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1652353998618,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,8 +27,9 @@\n             setFirebaseInitialized(val);\n             db.collection(\"category\").get().then((querySnapshot) => {\n                 setCategories(querySnapshot.docs.map((doc) => doc.data().category_short_name));\n             })\n+            db.collection(\"categories\")\n         });\n     });\n \n     return firebaseInitialized !== false ? (\n"
                },
                {
                    "date": 1652354003991,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,9 +27,9 @@\n             setFirebaseInitialized(val);\n             db.collection(\"category\").get().then((querySnapshot) => {\n                 setCategories(querySnapshot.docs.map((doc) => doc.data().category_short_name));\n             })\n-            db.collection(\"categories\")\n+            db.collection(\"categories\").insert\n         });\n     });\n \n     return firebaseInitialized !== false ? (\n"
                },
                {
                    "date": 1652354035503,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,9 +27,9 @@\n             setFirebaseInitialized(val);\n             db.collection(\"category\").get().then((querySnapshot) => {\n                 setCategories(querySnapshot.docs.map((doc) => doc.data().category_short_name));\n             })\n-            db.collection(\"categories\").insert\n+            db.collection(\"categories\").add()\n         });\n     });\n \n     return firebaseInitialized !== false ? (\n"
                },
                {
                    "date": 1652354042757,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -27,9 +27,9 @@\n             setFirebaseInitialized(val);\n             db.collection(\"category\").get().then((querySnapshot) => {\n                 setCategories(querySnapshot.docs.map((doc) => doc.data().category_short_name));\n             })\n-            db.collection(\"categories\").add()\n+             db.collection(\"categories\").add()\n         });\n     });\n \n     return firebaseInitialized !== false ? (\n"
                },
                {
                    "date": 1652354067261,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,33 @@\n         firebase.isInitialized().then((val) => {\n             setFirebaseInitialized(val);\n             db.collection(\"category\").get().then((querySnapshot) => {\n                 setCategories(querySnapshot.docs.map((doc) => doc.data().category_short_name));\n-            })\n+            })[        \"中國\",\n+            \"歐美\",\n+            \"日本\",\n+            \"台灣\",\n+            \"香港\",\n+            \"東南亞\",\n+            \"韓國\",\n+            \"H漫\",\n+            \"有碼\",\n+            \"無碼\",\n+            \"生肉\",\n+            \"熟肉\",\n+            \"巨乳\",\n+            \"SM\",\n+            \"偷拍\",\n+            \"人妻\",\n+            \"學生\",\n+            \"群p\",\n+            \"同性\",\n+            \"露出\",\n+            \"制服\",\n+            \"近親\",\n+            \"其他\",\n+        ];\n+    ]\n              db.collection(\"categories\").add()\n         });\n     });\n \n"
                },
                {
                    "date": 1652354076090,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,10 @@\n         firebase.isInitialized().then((val) => {\n             setFirebaseInitialized(val);\n             db.collection(\"category\").get().then((querySnapshot) => {\n                 setCategories(querySnapshot.docs.map((doc) => doc.data().category_short_name));\n-            })[        \"中國\",\n+            })\n+            [        \"中國\",\n             \"歐美\",\n             \"日本\",\n             \"台灣\",\n             \"香港\",\n@@ -49,10 +50,10 @@\n             \"露出\",\n             \"制服\",\n             \"近親\",\n             \"其他\",\n-        ];\n-    ]\n+        ].map()\n+\n              db.collection(\"categories\").add()\n         });\n     });\n \n"
                },
                {
                    "date": 1652354086052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,10 @@\n-import React, {useState, useEffect, createContext, useContext} from \"react\";\n+import React, { useState, useEffect, createContext, useContext } from \"react\";\n import FileUpload from \"../FileUpload\";\n-import {MuiThemeProvider, createTheme} from \"@material-ui/core/styles\";\n-import {CssBaseline, CircularProgress} from \"@material-ui/core\";\n-import {BrowserRouter as Router, Switch, Route} from \"react-router-dom\";\n-import firebase, {db} from \"../../firebase\";\n+import { MuiThemeProvider, createTheme } from \"@material-ui/core/styles\";\n+import { CssBaseline, CircularProgress } from \"@material-ui/core\";\n+import { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n+import firebase, { db } from \"../../firebase\";\n import Login from \"../Login\";\n import Registration from \"../Registration\";\n import Home from \"../Home\";\n import Player from \"../Player\";\n@@ -16,57 +16,62 @@\n import Search from \"../Search\";\n import All from \"../All\";\n \n const theme = createTheme();\n-const CategoryContext = createContext({categories: []});\n+const CategoryContext = createContext({ categories: [] });\n export default function App() {\n     const [firebaseInitialized, setFirebaseInitialized] = useState(false);\n     const [categories, setCategories] = useState([]);\n \n     useEffect(() => {\n         firebase.isInitialized().then((val) => {\n             setFirebaseInitialized(val);\n-            db.collection(\"category\").get().then((querySnapshot) => {\n-                setCategories(querySnapshot.docs.map((doc) => doc.data().category_short_name));\n-            })\n-            [        \"中國\",\n-            \"歐美\",\n-            \"日本\",\n-            \"台灣\",\n-            \"香港\",\n-            \"東南亞\",\n-            \"韓國\",\n-            \"H漫\",\n-            \"有碼\",\n-            \"無碼\",\n-            \"生肉\",\n-            \"熟肉\",\n-            \"巨乳\",\n-            \"SM\",\n-            \"偷拍\",\n-            \"人妻\",\n-            \"學生\",\n-            \"群p\",\n-            \"同性\",\n-            \"露出\",\n-            \"制服\",\n-            \"近親\",\n-            \"其他\",\n-        ].map()\n+            db.collection(\"category\")\n+                .get()\n+                .then((querySnapshot) => {\n+                    setCategories(\n+                        querySnapshot.docs.map((doc) => doc.data().category_short_name)\n+                    );\n+                });\n+            [\n+                \"中國\",\n+                \"歐美\",\n+                \"日本\",\n+                \"台灣\",\n+                \"香港\",\n+                \"東南亞\",\n+                \"韓國\",\n+                \"H漫\",\n+                \"有碼\",\n+                \"無碼\",\n+                \"生肉\",\n+                \"熟肉\",\n+                \"巨乳\",\n+                \"SM\",\n+                \"偷拍\",\n+                \"人妻\",\n+                \"學生\",\n+                \"群p\",\n+                \"同性\",\n+                \"露出\",\n+                \"制服\",\n+                \"近親\",\n+                \"其他\",\n+            ].forEach();\n \n-             db.collection(\"categories\").add()\n+            db.collection(\"categories\").add();\n         });\n     });\n \n     return firebaseInitialized !== false ? (\n         <MuiThemeProvider theme={theme}>\n-            <CategoryContext.Provider value={{categories}}>\n-                <CssBaseline/>\n+            <CategoryContext.Provider value={{ categories }}>\n+                <CssBaseline />\n                 <Router>\n                     <Switch>\n-                        <Route exact path=\"/login\" component={Login}/>\n-                        <Route exact path=\"/register\" component={Registration}/>\n-                        <Route exact path=\"/upload\" component={FileUpload}/>\n+                        <Route exact path=\"/login\" component={Login} />\n+                        <Route exact path=\"/register\" component={Registration} />\n+                        <Route exact path=\"/upload\" component={FileUpload} />\n                         <Route exact path=\"/file\" component={File}></Route>\n                         <Route exact path=\"/player/id/:id\" component={Player}></Route>\n                         <Route exact path=\"/\" component={Home}></Route>\n                         <Route\n@@ -89,14 +94,14 @@\n             </CategoryContext.Provider>\n         </MuiThemeProvider>\n     ) : (\n         <div id=\"loader\">\n-            <CircularProgress/>\n+            <CircularProgress />\n         </div>\n     );\n }\n \n-export function useCategories () {\n+export function useCategories() {\n     const context = useContext(CategoryContext);\n     if (context === undefined) {\n         throw new Error(\"useCategories must be used within a CategoryProvider\");\n     }\n"
                },
                {
                    "date": 1652354091690,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,9 +55,9 @@\n                 \"露出\",\n                 \"制服\",\n                 \"近親\",\n                 \"其他\",\n-            ].forEach();\n+            ].forEach((category, index) => {});\n \n             db.collection(\"categories\").add();\n         });\n     });\n"
                },
                {
                    "date": 1652354100357,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -55,11 +55,11 @@\n                 \"露出\",\n                 \"制服\",\n                 \"近親\",\n                 \"其他\",\n-            ].forEach((category, index) => {});\n-\n-            db.collection(\"categories\").add();\n+            ].forEach((category, index) => {\n+                db.collection(\"categories\").add();\n+            });\n         });\n     });\n \n     return firebaseInitialized !== false ? (\n"
                },
                {
                    "date": 1652354106215,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,9 +56,9 @@\n                 \"制服\",\n                 \"近親\",\n                 \"其他\",\n             ].forEach((category, index) => {\n-                db.collection(\"categories\").add();\n+                db.collection(\"categories\").add({category_name: category});\n             });\n         });\n     });\n \n"
                },
                {
                    "date": 1652354178418,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,9 +56,12 @@\n                 \"制服\",\n                 \"近親\",\n                 \"其他\",\n             ].forEach((category, index) => {\n-                db.collection(\"categories\").add({category_name: category});\n+                db.collection(\"categories\").add({category_name: category, id: index + 1})..then((ref) => {\n+                    console.log(\"Added doc with ID: \", ref.id);\n+                    // Added doc with ID:  ZzhIgLqELaoE3eSsOazu\n+                  });;\n             });\n         });\n     });\n \n"
                },
                {
                    "date": 1652354184294,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,12 +56,14 @@\n                 \"制服\",\n                 \"近親\",\n                 \"其他\",\n             ].forEach((category, index) => {\n-                db.collection(\"categories\").add({category_name: category, id: index + 1})..then((ref) => {\n-                    console.log(\"Added doc with ID: \", ref.id);\n-                    // Added doc with ID:  ZzhIgLqELaoE3eSsOazu\n-                  });;\n+                db.collection(\"categories\")\n+                    .add({ category_name: category, id: index + 1 })\n+                    .then((ref) => {\n+                        console.log(\"Added doc with ID: \", ref.id);\n+                        // Added doc with ID:  ZzhIgLqELaoE3eSsOazu\n+                    });\n             });\n         });\n     });\n \n"
                },
                {
                    "date": 1652354218506,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,9 +64,9 @@\n                         // Added doc with ID:  ZzhIgLqELaoE3eSsOazu\n                     });\n             });\n         });\n-    });\n+    }, []);\n \n     return firebaseInitialized !== false ? (\n         <MuiThemeProvider theme={theme}>\n             <CategoryContext.Provider value={{ categories }}>\n"
                },
                {
                    "date": 1652354285419,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,40 +31,8 @@\n                     setCategories(\n                         querySnapshot.docs.map((doc) => doc.data().category_short_name)\n                     );\n                 });\n-            [\n-                \"中國\",\n-                \"歐美\",\n-                \"日本\",\n-                \"台灣\",\n-                \"香港\",\n-                \"東南亞\",\n-                \"韓國\",\n-                \"H漫\",\n-                \"有碼\",\n-                \"無碼\",\n-                \"生肉\",\n-                \"熟肉\",\n-                \"巨乳\",\n-                \"SM\",\n-                \"偷拍\",\n-                \"人妻\",\n-                \"學生\",\n-                \"群p\",\n-                \"同性\",\n-                \"露出\",\n-                \"制服\",\n-                \"近親\",\n-                \"其他\",\n-            ].forEach((category, index) => {\n-                db.collection(\"categories\")\n-                    .add({ category_name: category, id: index + 1 })\n-                    .then((ref) => {\n-                        console.log(\"Added doc with ID: \", ref.id);\n-                        // Added doc with ID:  ZzhIgLqELaoE3eSsOazu\n-                    });\n-            });\n         });\n     }, []);\n \n     return firebaseInitialized !== false ? (\n"
                },
                {
                    "date": 1652354303534,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,17 +24,17 @@\n \n     useEffect(() => {\n         firebase.isInitialized().then((val) => {\n             setFirebaseInitialized(val);\n-            db.collection(\"category\")\n+            db.collection(\"categories\")\n                 .get()\n                 .then((querySnapshot) => {\n                     setCategories(\n                         querySnapshot.docs.map((doc) => doc.data().category_short_name)\n                     );\n                 });\n         });\n-    }, []);\n+    });\n \n     return firebaseInitialized !== false ? (\n         <MuiThemeProvider theme={theme}>\n             <CategoryContext.Provider value={{ categories }}>\n"
                },
                {
                    "date": 1652354310007,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n \n     useEffect(() => {\n         firebase.isInitialized().then((val) => {\n             setFirebaseInitialized(val);\n-            db.collection(\"categories\")\n+            !cate db.collection(\"categories\")\n                 .get()\n                 .then((querySnapshot) => {\n                     setCategories(\n                         querySnapshot.docs.map((doc) => doc.data().category_short_name)\n"
                },
                {
                    "date": 1652354315447,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n \n     useEffect(() => {\n         firebase.isInitialized().then((val) => {\n             setFirebaseInitialized(val);\n-            !cate db.collection(\"categories\")\n+            !categories.length  db.collection(\"categories\")\n                 .get()\n                 .then((querySnapshot) => {\n                     setCategories(\n                         querySnapshot.docs.map((doc) => doc.data().category_short_name)\n"
                },
                {
                    "date": 1652354324737,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,13 +24,13 @@\n \n     useEffect(() => {\n         firebase.isInitialized().then((val) => {\n             setFirebaseInitialized(val);\n-            !categories.length  db.collection(\"categories\")\n+            !categories.length && db.collection(\"categories\")\n                 .get()\n                 .then((querySnapshot) => {\n                     setCategories(\n-                        querySnapshot.docs.map((doc) => doc.data().category_short_name)\n+                        querySnapshot.docs.map((doc) => doc.data().category_name)\n                     );\n                 });\n         });\n     });\n"
                },
                {
                    "date": 1652354332012,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n             !categories.length && db.collection(\"categories\")\n                 .get()\n                 .then((querySnapshot) => {\n                     setCategories(\n-                        querySnapshot.docs.map((doc) => doc.data().category_name)\n+                        querySnapshot.docs.sort(()) map((doc) => doc.data().category_name)\n                     );\n                 });\n         });\n     });\n"
                },
                {
                    "date": 1652354337735,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n             !categories.length && db.collection(\"categories\")\n                 .get()\n                 .then((querySnapshot) => {\n                     setCategories(\n-                        querySnapshot.docs.sort(()) map((doc) => doc.data().category_name)\n+                        querySnapshot.docs.sort((a,b) => ) map((doc) => doc.data().category_name)\n                     );\n                 });\n         });\n     });\n"
                },
                {
                    "date": 1652354344276,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,9 +28,9 @@\n             !categories.length && db.collection(\"categories\")\n                 .get()\n                 .then((querySnapshot) => {\n                     setCategories(\n-                        querySnapshot.docs.sort((a,b) => ) map((doc) => doc.data().category_name)\n+                        querySnapshot.docs.sort((a,b) => a.id - b.id).map((doc) => doc.data().category_name)\n                     );\n                 });\n         });\n     });\n"
                },
                {
                    "date": 1652354415152,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,15 +24,22 @@\n \n     useEffect(() => {\n         firebase.isInitialized().then((val) => {\n             setFirebaseInitialized(val);\n-            !categories.length && db.collection(\"categories\")\n-                .get()\n-                .then((querySnapshot) => {\n-                    setCategories(\n-                        querySnapshot.docs.sort((a,b) => a.id - b.id).map((doc) => doc.data().category_name)\n-                    );\n-                });\n+            !categories.length &&\n+                db\n+                    .collection(\"categories\")\n+                    .get()\n+                    .then((querySnapshot) => {\n+                        setCategories(\n+                            querySnapshot.docs\n+                                .sort((a, b) => a.id - b.id)\n+                                .map((doc) => doc.data().category_name)\n+                        );\n+                        console.log(querySnapshot.docs\n+                            .sort((a, b) => a.id - b.id)\n+                            .map((doc) => doc.data().category_name))\n+                    });\n         });\n     });\n \n     return firebaseInitialized !== false ? (\n"
                },
                {
                    "date": 1652354422280,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,11 +34,8 @@\n                             querySnapshot.docs\n                                 .sort((a, b) => a.id - b.id)\n                                 .map((doc) => doc.data().category_name)\n                         );\n-                        console.log(querySnapshot.docs\n-                            .sort((a, b) => a.id - b.id)\n-                            .map((doc) => doc.data().category_name))\n                     });\n         });\n     });\n \n"
                },
                {
                    "date": 1652354428848,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,10 +31,10 @@\n                     .get()\n                     .then((querySnapshot) => {\n                         setCategories(\n                             querySnapshot.docs\n+                                .map((doc) => doc.data().category_name)\n                                 .sort((a, b) => a.id - b.id)\n-                                .map((doc) => doc.data().category_name)\n                         );\n                     });\n         });\n     });\n"
                },
                {
                    "date": 1652354442827,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,10 +31,10 @@\n                     .get()\n                     .then((querySnapshot) => {\n                         setCategories(\n                             querySnapshot.docs\n+                            .sort((a, b) => a.id - b.id)\n                                 .map((doc) => doc.data().category_name)\n-                                .sort((a, b) => a.id - b.id)\n                         );\n                     });\n         });\n     });\n"
                },
                {
                    "date": 1652354451501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n                     .get()\n                     .then((querySnapshot) => {\n                         setCategories(\n                             querySnapshot.docs\n-                            .sort((a, b) => a.id - b.id)\n+                            .sort((a, b) => a.data().id - b.data().id)\n                                 .map((doc) => doc.data().category_name)\n                         );\n                     });\n         });\n"
                },
                {
                    "date": 1652354461300,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n                     .get()\n                     .then((querySnapshot) => {\n                         setCategories(\n                             querySnapshot.docs\n-                            .sort((a, b) => a.data().id - b.data().id)\n+                                .sort((a, b) => a.data().id - b.data().id)\n                                 .map((doc) => doc.data().category_name)\n                         );\n                     });\n         });\n"
                }
            ],
            "date": 1652353547332,
            "name": "Commit-0",
            "content": "import React, {useState, useEffect, createContext, useContext} from \"react\";\nimport FileUpload from \"../FileUpload\";\nimport {MuiThemeProvider, createTheme} from \"@material-ui/core/styles\";\nimport {CssBaseline, CircularProgress} from \"@material-ui/core\";\nimport {BrowserRouter as Router, Switch, Route} from \"react-router-dom\";\nimport firebase, {db} from \"../../firebase\";\nimport Login from \"../Login\";\nimport Registration from \"../Registration\";\nimport Home from \"../Home\";\nimport Player from \"../Player\";\nimport Filter from \"../Filter\";\nimport File from \"../File\";\nimport Dashboard from \"../Dashboard\";\nimport UpdateVideoInfo from \"../UpdateVideoInfo\";\nimport Tags from \"../Tags\";\nimport Search from \"../Search\";\nimport All from \"../All\";\n\nconst theme = createTheme();\nconst CategoryContext = createContext({categories: []});\nexport default function App() {\n    const [firebaseInitialized, setFirebaseInitialized] = useState(false);\n    const [categories, setCategories] = useState([]);\n\n    useEffect(() => {\n        firebase.isInitialized().then((val) => {\n            setFirebaseInitialized(val);\n            db.collection(\"category\").get().then((querySnapshot) => {\n                setCategories(querySnapshot.docs.map((doc) => doc.data().category_short_name));\n            })\n        });\n    });\n\n    return firebaseInitialized !== false ? (\n        <MuiThemeProvider theme={theme}>\n            <CategoryContext.Provider value={{categories}}>\n                <CssBaseline/>\n                <Router>\n                    <Switch>\n                        <Route exact path=\"/login\" component={Login}/>\n                        <Route exact path=\"/register\" component={Registration}/>\n                        <Route exact path=\"/upload\" component={FileUpload}/>\n                        <Route exact path=\"/file\" component={File}></Route>\n                        <Route exact path=\"/player/id/:id\" component={Player}></Route>\n                        <Route exact path=\"/\" component={Home}></Route>\n                        <Route\n                            exact\n                            path=\"/filter/category/:category\"\n                            component={Filter}\n                        ></Route>\n                        <Route exact path=\"/uploads\" component={File}></Route>\n                        <Route exact path=\"/dashboard\" component={Dashboard}></Route>\n                        <Route\n                            exact\n                            path=\"/updateVideoInfo\"\n                            component={UpdateVideoInfo}\n                        ></Route>\n                        <Route exact path=\"/Tags\" component={Tags}></Route>\n                        <Route exact path=\"/Search/tag/:tag\" component={Search}></Route>\n                        <Route exact path=\"/All\" component={All}></Route>\n                    </Switch>\n                </Router>\n            </CategoryContext.Provider>\n        </MuiThemeProvider>\n    ) : (\n        <div id=\"loader\">\n            <CircularProgress/>\n        </div>\n    );\n}\n\nexport function useCategories () {\n    const context = useContext(CategoryContext);\n    if (context === undefined) {\n        throw new Error(\"useCategories must be used within a CategoryProvider\");\n    }\n    return context.categories;\n}\n"
        }
    ]
}